# Generated by Django 4.2.5 on 2023-11-09 09:44

from django.db import migrations


def update_areas_available(apps, schemaeditor):  # pragma: no cover
    DataSet = apps.get_model("hub", "DataSet")
    AreaType = apps.get_model("hub", "AreaType")

    at, _ = AreaType.objects.get_or_create(
        name="2010 Parliamentary Constituency",
        code="WMC",
        area_type="Westminster Constituency",
        description="Westminster Parliamentary Constituency boundaries, as created in 2010",
    )

    for ds in DataSet.objects.all():
        ds.areas_available.add(at)


def reverse_noop(apps, schema_editor):  # pragma: no cover
    pass


class Migration(migrations.Migration):

    dependencies = [
        ("hub", "0056_dataset_areas_available"),
    ]

    operations = [migrations.RunPython(update_areas_available, reverse_noop)]
